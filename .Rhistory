tab_caption(caption = md("Summary statistics of EQ-5D utility score follow-up outcome variables in the study by treatment arm (0=standard,1=intervention) and AKI status (0=no,1=yes)."))
#| eval: true
#| echo: false
#| message: false
#| warning: false
#| cache: false
#| label: tbl-sum7
gt_sum_gt_fu_sepsis %>%
tab_caption(caption = md("Summary statistics of EQ-5D utility score follow-up outcome variables in the study by sepsis status (0=no,1=yes)."))
#| eval: true
#| echo: false
#| message: false
#| warning: false
#| cache: false
#| label: tbl-sum8
gt_sum_arm_gt_sepsis_final %>%
tab_caption(caption = md("Summary statistics of EQ-5D utility score follow-up outcome variables in the study by treatment arm (0=standard,1=intervention) and sepsis status (0=no,1=yes)."))
#| eval: true
#| echo: false
#| message: false
#| warning: false
#| cache: false
#| label: tbl-sum9
gt_sum_gt_fu_failure %>%
tab_caption(caption = md("Summary statistics of EQ-5D utility score follow-up outcome variables in the study by multi organ failure status (0=no,1=yes)."))
#| eval: true
#| echo: false
#| message: false
#| warning: false
#| cache: false
#| label: tbl-sum10
gt_sum_arm_gt_failure_final %>%
tab_caption(caption = md("Summary statistics of EQ-5D utility score follow-up outcome variables in the study by treatment arm (0=standard,1=intervention) and multi organ failure status (0=no,1=yes)."))
data_descr <- data_descr[data_descr$failure==1,]
data_descr$zero_d1 <- ifelse(data_descr$qol_1==0,1,0)
data_descr$zero_d2 <- ifelse(data_descr$qol_2==0,1,0)
data_descr$zero_d3 <- ifelse(data_descr$qol_3==0,1,0)
data_descr$zero_d <- ifelse(data_descr$zero_d1==1 & data_descr$zero_d2==1 & data_descr$zero_d3==1,1,0)
#get completed dataset
data_descr_cc <- data_descr[is.na(data_descr$qol_base)==FALSE,]
data_descr_cc$id_cc <- seq(1:length(data_descr_cc$id))
data_descr_cc
names(data_descr)
dataset_long_eq5d <- reshape(data_descr, varying = c("qol_1","qol_2","qol_3"), direction = "long", idvar = "id", sep = "_")
data_descr$id
#| eval: true
#| echo: false
#| message: false
#| warning: false
#| cache: false
#| label: fig-priors
#| out-width: '80%'
knitr::include_graphics('./skep_ent_priors.png')
#| eval: true
#| echo: false
#| message: false
#| warning: false
#| cache: false
#load packages needed for analysis
library(foreign)
library(data.table)
library(kableExtra)
library(bookdown)
library(reshape)
library(ggplot2)
library(ggpubr)
library(dplyr)
library(plotrix)
library(emmeans)
library(nlme)
library(lme4)
library(lmerTest)
library(readxl)
library(tidyverse)
library(gt)
library(gtsummary)
library(broom.mixed)
library(mice)
library(miceadds)
library(mitml)
library(boot)
library(BCEA)
#remove scientific notation for numbers
options(scipen=999)
#set local path to import data
#setwd("C:/Users/andre/Documents/maastrict/consultancy/trials/precise/bayesian_analysis/analysis")
#load dataset (935 observations on 27 variables)
dataset <- read_excel("Database PRECISe for Andrea.xlsx", sheet = 1, col_names = TRUE, na = "NA")
#define elements/variables for summary statistics/analysis
#number of patients
N <- dim(dataset)[1]
#re-code id number of patients
id <- seq(1:N)
#use number of center and create factor variable
center <- dataset$`INSTITUTION CODE`
center_f <- factor(center)
#re-code trt indicator (0=control,1=intervention)
trt <- ifelse(dataset$`RANDOMIZATION GROUP`== "Group 1",0,1)
trt_f <- factor(trt)
#age (years)
age <- dataset$AGE
#re-code sex (0 = , 1 = )
sex <- dataset$SEX
sex_f <- factor(sex-1)
#weight (Kg)
weight <- dataset$WEIGT
#height (cm)
height <- dataset$HEIGHT
#BMI
bmi <- dataset$BMI
#diabetes (0=no, 1=yes)
diabete <- dataset$DIABETES
diabete_f <- factor(diabete)
#re-code admission type (0=,1=)
admission <- dataset$`ADMISSION TYPE`
admission_f <- factor(admission-1)
#covid (0=no, 1=yes)
covid <- dataset$COVID
covid_f <- factor(covid)
#AKI (0=no, 1=yes)
aki <- dataset$AKI
aki_f <- factor(aki)
#sepsis (0=no, 1=yes)
sepsis <- dataset$SEPSIS
sepsis_f <- factor(sepsis)
#organ failure (0=no, 1=yes)
failure <- dataset$`ORGAN FAILURE`
failure_f <- factor(failure)
#qol baseline
qol_base <- dataset$`QoL 0 days (proxy)`
#qol 30 days
qol_1 <- dataset$`QoL 30 days`
#qol 90 days
qol_2 <- dataset$`QoL 90 days`
#qol 180 days
qol_3 <- dataset$`QoL 180 days`
#handgrip 30 days
hand_1 <- dataset$`HANDGRIP 30`
#handgrip 90 days
hand_2 <- dataset$`HANDGRIP 90`
#handgrip 180 days
hand_3 <- dataset$`HANDGRIP 180`
#smwt 30 days
smwt_1 <- dataset$`SMWT 30`
#smwt 90 days
smwt_2 <- dataset$`SMWT 90`
#smwt 180 days
smwt_3 <- dataset$`SMWT 180`
#mortality 60 days (0=alive,1=dead)
mort60 <- dataset$`MORTALITY 60 days`
mort60_f <- factor(mort60)
#mv dur (days)
mv_dur <- dataset$`MV duration (days)`
#create new dataset with updated variables to create summary statistics
data_descr <- data.frame(id,center_f,center,trt,trt_f,age,sex,sex_f,weight,height,bmi,diabete,diabete_f,admission,admission_f,covid,covid_f,aki,aki_f,sepsis,sepsis_f,failure,failure_f,qol_base,qol_1,qol_2,qol_3,hand_1,hand_2,hand_3,smwt_1,smwt_2,smwt_3,mort60,mort60_f,mv_dur)
#data_descr <- data.table(data_descr)
#summary statistics for baseline variables across arms
gt_sum_baseline <-
tbl_summary(
data_descr,
type = list(trt ~ "categorical", center_f ~ "categorical", sex_f ~ "categorical",
diabete_f ~ "categorical", admission_f ~ "categorical", covid_f ~ "categorical",
aki_f ~ "categorical",sepsis_f ~ "categorical",failure_f ~ "categorical",
weight ~ "continuous", height ~ "continuous", bmi ~ "continuous", qol_base ~ "continuous"
),
include = c(trt, center_f, sex_f, diabete_f, admission_f, covid_f, aki_f, sepsis_f, failure_f, weight, height, bmi, qol_base),
statistic = list(
all_continuous() ~ "{mean} ({sd})",
all_categorical() ~ "{n} ({p}%)"
),
digits = all_continuous() ~ 2,
missing = "always" # don't list missing data separately
) %>%
add_n(statistic = "{n} {p_nonmiss}%", col_label = "**N** **obs%**") %>% # add column with total number of non-missing observations
modify_header(label = "**Variable**") %>% # update the column header
bold_labels()
gt_sum_gt_baseline <- as_gt(gt_sum_baseline)
#summary statistics for baseline variables by arm
gt_sum_baseline_arm <-
tbl_summary(by = trt,
data_descr,
type = list(center_f ~ "categorical", sex_f ~ "categorical",
diabete_f ~ "categorical", admission_f ~ "categorical", covid_f ~ "categorical",
aki_f ~ "categorical",sepsis_f ~ "categorical",failure_f ~ "categorical",
weight ~ "continuous", height ~ "continuous", bmi ~ "continuous", qol_base ~ "continuous"),
include = c(center_f, sex_f, diabete_f, admission_f, covid_f, aki_f, sepsis_f, failure_f, weight, height, bmi, qol_base),
statistic = list(
all_continuous() ~ "{mean} ({sd})",
all_categorical() ~ "{n} ({p}%)"
),
digits = all_continuous() ~ 2,
missing = "always" # don't list missing data separately
) %>%
add_n(statistic = "{n} {p_nonmiss}%", col_label = "**N** **obs%**") %>% # add column with total number of non-missing observations
modify_header(label = "**Variable**") %>% # update the column header
bold_labels()
gt_sum_gt_baseline_arm <- as_gt(gt_sum_baseline_arm)
#summary statistics for key follo-up outcome variables across arms
gt_sum_fu <-
tbl_summary(
data_descr,
include = c(qol_1, qol_2, qol_3, hand_1, hand_2, hand_3, smwt_1, smwt_2, smwt_3, mort60_f, mv_dur),
statistic = list(
all_continuous() ~ "{mean} ({sd})",
all_categorical() ~ "{n} ({p}%)"
),
digits = all_continuous() ~ 2,
missing = "always" # don't list missing data separately
) %>%
add_n(statistic = "{n} {p_nonmiss}%", col_label = "**N** **obs%**") %>% # add column with total number of non-missing observations
modify_header(label = "**Variable**") %>% # update the column header
bold_labels()
gt_sum_gt_fu <- as_gt(gt_sum_fu)
#summary statistics for baseline variables by arm
gt_sum_fu_arm <-
tbl_summary(by = trt,
data_descr,
include = c(qol_1, qol_2, qol_3, hand_1, hand_2, hand_3, smwt_1, smwt_2, smwt_3, mort60_f, mv_dur),
statistic = list(
all_continuous() ~ "{mean} ({sd})",
all_categorical() ~ "{n} ({p}%)"
),
digits = all_continuous() ~ 2,
missing = "always" # don't list missing data separately
) %>%
add_n(statistic = "{n} {p_nonmiss}%", col_label = "**N** **obs%**") %>% # add column with total number of non-missing observations
modify_header(label = "**Variable**") %>% # update the column header
bold_labels()
gt_sum_gt_fu_arm <- as_gt(gt_sum_fu_arm)
##############################
#subgroup analyses
#summary statistics for outcome variables at follow-up across arms by AKI status
gt_sum_fu_aki <-
tbl_summary(by = aki,
data_descr,
#    type = list(qol_1 ~ "continuous", qol_2 ~ #"continuous", qol_3 ~ "continuous"),
include = c(qol_1, qol_2, qol_3),
statistic = list(
all_continuous() ~ "{mean} ({sd})"),
digits = all_continuous() ~ 2,
missing = "always" # don't list missing data separately
) %>%
add_n(statistic = "{n} {p_nonmiss}%", col_label = "**N** **obs%**") %>% # add column with total number of non-missing observations
modify_header(label = "**Variable**") %>% # update the column header
bold_labels()
gt_sum_gt_fu_aki <- as_gt(gt_sum_fu_aki)
#summary statistics for outcome variables at follow-up by arms and by AKI status
data_descr_aki0 <- data_descr[data_descr$aki==0,]
data_descr_aki1 <- data_descr[data_descr$aki==1,]
gt_sum_fu_aki0_trt <-
tbl_summary(by = trt,
data_descr_aki0,
#    type = list(qol_1 ~ "continuous", qol_2 ~ #"continuous", qol_3 ~ "continuous"),
include = c(qol_1, qol_2, qol_3),
statistic = list(
all_continuous() ~ "{mean} ({sd})"),
digits = all_continuous() ~ 2,
missing = "always" # don't list missing data separately
) %>%
add_n(statistic = "{n} {p_nonmiss}%", col_label = "**N** **obs%**") %>% # add column with total number of non-missing observations
modify_header(label = "**Variable**") %>% # update the column header
bold_labels()
gt_sum_gt_fu_aki0_trt <- as_gt(gt_sum_fu_aki0_trt)
gt_sum_fu_aki1_trt <-
tbl_summary(by = trt,
data_descr_aki1,
#    type = list(qol_1 ~ "continuous", qol_2 ~ #"continuous", qol_3 ~ "continuous"),
include = c(qol_1, qol_2, qol_3),
statistic = list(
all_continuous() ~ "{mean} ({sd})"),
digits = all_continuous() ~ 2,
missing = "always" # don't list missing data separately
) %>%
add_n(statistic = "{n} {p_nonmiss}%", col_label = "**N** **obs%**") %>% # add column with total number of non-missing observations
modify_header(label = "**Variable**") %>% # update the column header
bold_labels()
gt_sum_gt_fu_aki1_trt <- as_gt(gt_sum_fu_aki1_trt)
gt_sum_arm_gt_aki <- tbl_stack(list(gt_sum_fu_aki0_trt, gt_sum_fu_aki1_trt), group_header = c("trt=0", "trt=1"))
gt_sum_arm_gt_aki_final <- as_gt(gt_sum_arm_gt_aki)
#summary statistics for outcome variables at follow-up across arms by sepsis status
gt_sum_fu_sepsis <-
tbl_summary(by = sepsis,
data_descr,
#    type = list(qol_1 ~ "continuous", qol_2 ~ #"continuous", qol_3 ~ "continuous"),
include = c(qol_1, qol_2, qol_3),
statistic = list(
all_continuous() ~ "{mean} ({sd})"),
digits = all_continuous() ~ 2,
missing = "always" # don't list missing data separately
) %>%
add_n(statistic = "{n} {p_nonmiss}%", col_label = "**N** **obs%**") %>% # add column with total number of non-missing observations
modify_header(label = "**Variable**") %>% # update the column header
bold_labels()
gt_sum_gt_fu_sepsis <- as_gt(gt_sum_fu_sepsis)
#summary statistics for outcome variables at follow-up by arms and by sepsis status
data_descr_sepsis0 <- data_descr[data_descr$sepsis==0,]
data_descr_sepsis1 <- data_descr[data_descr$sepsis==1,]
gt_sum_fu_sepsis0_trt <-
tbl_summary(by = trt,
data_descr_sepsis0,
#    type = list(qol_1 ~ "continuous", qol_2 ~ #"continuous", qol_3 ~ "continuous"),
include = c(qol_1, qol_2, qol_3),
statistic = list(
all_continuous() ~ "{mean} ({sd})"),
digits = all_continuous() ~ 2,
missing = "always" # don't list missing data separately
) %>%
add_n(statistic = "{n} {p_nonmiss}%", col_label = "**N** **obs%**") %>% # add column with total number of non-missing observations
modify_header(label = "**Variable**") %>% # update the column header
bold_labels()
gt_sum_gt_fu_sepsis0_trt <- as_gt(gt_sum_fu_sepsis0_trt)
gt_sum_fu_sepsis1_trt <-
tbl_summary(by = trt,
data_descr_sepsis1,
#    type = list(qol_1 ~ "continuous", qol_2 ~ #"continuous", qol_3 ~ "continuous"),
include = c(qol_1, qol_2, qol_3),
statistic = list(
all_continuous() ~ "{mean} ({sd})"),
digits = all_continuous() ~ 2,
missing = "always" # don't list missing data separately
) %>%
add_n(statistic = "{n} {p_nonmiss}%", col_label = "**N** **obs%**") %>% # add column with total number of non-missing observations
modify_header(label = "**Variable**") %>% # update the column header
bold_labels()
gt_sum_gt_fu_sepsis1_trt <- as_gt(gt_sum_fu_sepsis1_trt)
gt_sum_arm_gt_sepsis <- tbl_stack(list(gt_sum_fu_sepsis0_trt, gt_sum_fu_sepsis1_trt), group_header = c("trt=0", "trt=1"))
gt_sum_arm_gt_sepsis_final <- as_gt(gt_sum_arm_gt_sepsis)
#summary statistics for outcome variables at follow-up across arms by multi organ failure status
gt_sum_fu_failure <-
tbl_summary(by = failure,
data_descr,
#    type = list(qol_1 ~ "continuous", qol_2 ~ #"continuous", qol_3 ~ "continuous"),
include = c(qol_1, qol_2, qol_3),
statistic = list(
all_continuous() ~ "{mean} ({sd})"),
digits = all_continuous() ~ 2,
missing = "always" # don't list missing data separately
) %>%
add_n(statistic = "{n} {p_nonmiss}%", col_label = "**N** **obs%**") %>% # add column with total number of non-missing observations
modify_header(label = "**Variable**") %>% # update the column header
bold_labels()
gt_sum_gt_fu_failure <- as_gt(gt_sum_fu_failure)
#summary statistics for outcome variables at follow-up by arms and by failure status
data_descr_failure0 <- data_descr[data_descr$failure==0,]
data_descr_failure1 <- data_descr[data_descr$failure==1,]
gt_sum_fu_failure0_trt <-
tbl_summary(by = trt,
data_descr_failure0,
#    type = list(qol_1 ~ "continuous", qol_2 ~ #"continuous", qol_3 ~ "continuous"),
include = c(qol_1, qol_2, qol_3),
statistic = list(
all_continuous() ~ "{mean} ({sd})"),
digits = all_continuous() ~ 2,
missing = "always" # don't list missing data separately
) %>%
add_n(statistic = "{n} {p_nonmiss}%", col_label = "**N** **obs%**") %>% # add column with total number of non-missing observations
modify_header(label = "**Variable**") %>% # update the column header
bold_labels()
gt_sum_gt_fu_failure0_trt <- as_gt(gt_sum_fu_failure0_trt)
gt_sum_fu_failure1_trt <-
tbl_summary(by = trt,
data_descr_failure1,
#    type = list(qol_1 ~ "continuous", qol_2 ~ #"continuous", qol_3 ~ "continuous"),
include = c(qol_1, qol_2, qol_3),
statistic = list(
all_continuous() ~ "{mean} ({sd})"),
digits = all_continuous() ~ 2,
missing = "always" # don't list missing data separately
) %>%
add_n(statistic = "{n} {p_nonmiss}%", col_label = "**N** **obs%**") %>% # add column with total number of non-missing observations
modify_header(label = "**Variable**") %>% # update the column header
bold_labels()
gt_sum_gt_fu_failure1_trt <- as_gt(gt_sum_fu_failure1_trt)
gt_sum_arm_gt_failure <- tbl_stack(list(gt_sum_fu_failure0_trt, gt_sum_fu_failure1_trt), group_header = c("trt=0", "trt=1"))
gt_sum_arm_gt_failure_final <- as_gt(gt_sum_arm_gt_failure)
#| eval: true
#| echo: false
#| message: false
#| warning: false
#| cache: false
#| label: tbl-sum1
gt_sum_gt_baseline %>%
tab_caption(caption = md("Summary statistics of key baseline variables in the study across arms."))
#| eval: true
#| echo: false
#| message: false
#| warning: false
#| cache: false
#| label: tbl-sum2
gt_sum_gt_baseline_arm %>%
tab_caption(caption = md("Summary statistics of key baseline variables in the study by treatment arm (0=standard,1=intervention)."))
#| eval: true
#| echo: false
#| message: false
#| warning: false
#| cache: false
#| label: tbl-sum3
gt_sum_gt_fu %>%
tab_caption(caption = md("Summary statistics of key follo-up outcome variables in the study across arms."))
#| eval: true
#| echo: false
#| message: false
#| warning: false
#| cache: false
#| label: tbl-sum4
gt_sum_gt_fu_arm %>%
tab_caption(caption = md("Summary statistics of key follow-up outcome variables in the study by treatment arm (0=standard,1=intervention)."))
#| eval: true
#| echo: false
#| message: false
#| warning: false
#| cache: false
#| label: tbl-sum5
gt_sum_gt_fu_aki %>%
tab_caption(caption = md("Summary statistics of EQ-5D utility score follow-up outcome variables in the study by AKI status (0=no,1=yes)."))
#| eval: true
#| echo: false
#| message: false
#| warning: false
#| cache: false
#| label: tbl-sum6
gt_sum_arm_gt_aki_final %>%
tab_caption(caption = md("Summary statistics of EQ-5D utility score follow-up outcome variables in the study by treatment arm (0=standard,1=intervention) and AKI status (0=no,1=yes)."))
#| eval: true
#| echo: false
#| message: false
#| warning: false
#| cache: false
#| label: tbl-sum7
gt_sum_gt_fu_sepsis %>%
tab_caption(caption = md("Summary statistics of EQ-5D utility score follow-up outcome variables in the study by sepsis status (0=no,1=yes)."))
#| eval: true
#| echo: false
#| message: false
#| warning: false
#| cache: false
#| label: tbl-sum8
gt_sum_arm_gt_sepsis_final %>%
tab_caption(caption = md("Summary statistics of EQ-5D utility score follow-up outcome variables in the study by treatment arm (0=standard,1=intervention) and sepsis status (0=no,1=yes)."))
#| eval: true
#| echo: false
#| message: false
#| warning: false
#| cache: false
#| label: tbl-sum9
gt_sum_gt_fu_failure %>%
tab_caption(caption = md("Summary statistics of EQ-5D utility score follow-up outcome variables in the study by multi organ failure status (0=no,1=yes)."))
#| eval: true
#| echo: false
#| message: false
#| warning: false
#| cache: false
#| label: tbl-sum10
gt_sum_arm_gt_failure_final %>%
tab_caption(caption = md("Summary statistics of EQ-5D utility score follow-up outcome variables in the study by treatment arm (0=standard,1=intervention) and multi organ failure status (0=no,1=yes)."))
data_descr <- data_descr[data_descr$failure==1 & is.na(data_descr$failure)==FALSE,]
data_descr$id
library(ggmcmc)
help(ggmcmc)
#load packages needed for analysis
library(foreign)
library(data.table)
library(kableExtra)
library(bookdown)
library(reshape)
library(ggplot2)
library(ggpubr)
library(dplyr)
library(plotrix)
library(emmeans)
library(nlme)
library(lme4)
library(lmerTest)
library(readxl)
library(tidyverse)
library(gt)
library(gtsummary)
library(broom.mixed)
library(mice)
library(miceadds)
library(mitml)
library(boot)
library(BCEA)
#load packages needed for analysis
library(foreign)
library(data.table)
library(kableExtra)
library(bookdown)
library(reshape)
library(ggplot2)
library(ggpubr)
library(dplyr)
library(plotrix)
library(emmeans)
library(nlme)
library(lme4)
library(lmerTest)
library(readxl)
library(tidyverse)
library(gt)
library(gtsummary)
library(broom.mixed)
library(mice)
library(miceadds)
library(mitml)
library(boot)
library(BCEA)
dataset <- read_excel("Database PRECISe for Andrea.xlsx", sheet = 1, col_names = TRUE, na = "NA")
names(dataset)
version
install.packages(c("admisc", "betareg", "bitops", "bookdown", "broom.helpers", "bslib", "checkmate", "chk", "cli", "colorspace", "corrplot", "cpp11", "crul", "curl", "data.table", "digest", "emmeans", "expm", "extras", "flexsurv", "future", "gap", "gdtools", "gert", "ggdag", "ggrepel", "gt", "gtsummary", "heemod", "htmlTable", "httr2", "knitr", "lme4", "loo", "matrixStats", "minqa", "msm", "mstate", "multcomp", "mvtnorm", "nloptr", "openssl", "ordinal", "parallelly", "pbkrtest", "pkgload", "polyclip", "posterior", "ps", "psych", "QuickJSR", "ragg", "Rcpp", "RcppArmadillo", "RcppEigen", "RcppParallel", "Rdpack", "reactR", "reprex", "rjags", "rlang", "rmarkdown", "rms", "robustbase", "rstpm2", "s2", "sf", "sfsmisc", "shiny", "SparseM", "StanHeaders", "texreg", "tinytex", "ucminf", "usethis", "uuid", "V8", "waldo", "withr", "wk", "xfun", "yaml"))
installr::updater()
